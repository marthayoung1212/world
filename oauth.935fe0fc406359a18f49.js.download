(window.webpackJsonpDelete=window.webpackJsonpDelete||[]).push([[27],{540:function(e,t,n){"use strict";n.r(t);n(5),n(6),n(8),n(7);var o=n(2),i=n(0),r=(n(18),n(10));function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"onClick",function(){try{i.openPopup(),i.checkPopup()}catch(e){console.error(e)}}),a(this,"checkPopup",function(){if(i.popup.closed){var e=i.checkStorage();if(null!==e){var t={name:e.name,email:e.email,token:e.token,provider:"twitter"};i.callBack(t),i.cleanStorage()}}else setTimeout(function(){i.checkPopup()},100)}),a(this,"checkStorage",function(){var e=window.localStorage.getItem("oauthTwitter");return e=e?JSON.parse(e):null}),a(this,"cleanStorage",function(){window.localStorage.removeItem("oauthTwitter")}),a(this,"openPopup",function(){i.popup=window.open(i.urlRequestToken,"_blank","height=400,width=800,left=250,top=100,resizable=yes",!0),i.popup.open()}),this.popup=null,this.urlRequestToken=t,this.callBack=n}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"init",value:function(){var e=this;r.a.get(this.urlRequestToken).then(function(t){t.data.Success&&(e.token=t.data.Token)}).catch(function(e){console.error(e)})}}]),e}();function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"insertScript",function(){var e=document.createElement("script");e.async=!0,e.src="//apis.google.com/js/client:platform.js",e.onload=o.apiLoad,document.body.appendChild(e)}),l(this,"apiLoad",function(){window.gapi.load("auth2",function(){o.googleAuth=window.gapi.auth2.init({client_id:o.apiId})})}),l(this,"onClick",function(){o.googleAuth.signIn({scope:"profile email",prompt:"select_account",ux_mode:"popup"}).then(function(e){var t={name:e.getBasicProfile().getName(),email:e.getBasicProfile().getEmail(),token:e.getAuthResponse().id_token,provider:"google"};o.callback(t)}).catch(function(e){console.log(e)})}),this.apiId=t,this.callback=n,this.insertScript()};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"onClick",function(){window.FB.login(o.onLogin,{scope:"public_profile, email",return_scopes:!0})}),p(this,"onLogin",function(){var e={};window.FB.api("/me?fields=name,email",function(t){e.name=t.name,e.email=t.email,e.provider="facebook",window.FB.getLoginStatus(function(t){e.token=t.authResponse.accessToken,o.callback(e)})})}),p(this,"insertScript",function(){var e=document.createElement("script");e.async=!0,e.src="//connect.facebook.net/en_GB/sdk.js",e.onload=o.onLoad,document.body.appendChild(e)}),p(this,"onLoad",function(){window.FB.init({appId:o.appId,xfbml:!0,version:"v3.2"})}),this.appId=t,this.callback=n,this.insertScript()},d=n(19),h=n(28);function b(e){"@babel/helpers - typeof";return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(n,o["a"]);var t=y(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return g(m(e=t.call.apply(t,[this].concat(r))),"init",function(){switch(e.options.type){case"google":e.socialModule=new s(e.options.appId,e.defaultCallback);break;case"facebook":e.socialModule=new f(e.options.appId,e.defaultCallback);break;case"twitter":e.socialModule=new u(e.options["url-request-token"],e.defaultCallback,e.options["url-twitter-popup"]);break;default:return}null!==e.socialModule&&(e.element.addEventListener("click",e.onClick),e.element.addEventListener("click",e.socialModule.onClick))}),g(m(e),"onClick",function(){d.a.push(e.options.currentPage,"Social Vote Button Click",e.options.type)}),g(m(e),"defaultCallback",function(t){i.a.emit(h.a,e.options.id,t,e.options.title),d.a.push(e.options.currentPage,"Vote Form Submission Completed",e.options.type)}),e.socialModule=null,e.init(),e}return n}();n(1).a.getInstance().define("oauth",v)}},[[540,0]]]);
//# sourceMappingURL=oauth.935fe0fc406359a18f49.js.map