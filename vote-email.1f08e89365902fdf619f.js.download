(window.webpackJsonpDelete=window.webpackJsonpDelete||[]).push([[50],{507:function(e,t,n){},555:function(e,t,n){"use strict";n.r(t);n(507),n(5),n(6),n(8),n(7),n(18);var r=n(2),o=n(0),a=n(10),i=n(44),l=n(28),s=n(19);function c(e){"@babel/helpers - typeof";return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,n)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r["a"]);var t=d(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return v(p(e=t.call.apply(t,[this].concat(c))),"addListeners",function(){for(var t=0;t<e.inputs.length;t++)e.inputs[t].addEventListener("blur",e.onBlur);e.element.addEventListener("submit",e.onSubmit),o.a.addListener(i.b,function(t,n){return e.onUpdateGuid(t,n)}),o.a.addListener(l.a,function(t,n){return e.onNewInfo(t,n)})}),v(p(e),"onNewInfo",function(t,n){t===e.options.id&&(e.changeField(e.element.clientName,n.name),e.changeField(e.element.clientEmail,n.email),e.provider=n.provider,e.token=n.token)}),v(p(e),"changeField",function(e,t){e.value=t,e.setAttribute("disabled","true"),e.classList.add("isNotEmpty")}),v(p(e),"onUpdateGuid",function(t,n){t===e.options.id&&(e.guid=n)}),v(p(e),"onBlur",function(t){var n=t.currentTarget;""!==n.value&&"-1"!==n.value?n.classList.add("isNotEmpty"):n.classList.remove("isNotEmpty"),e.checkValid(n)?(n.classList.remove("isError"),e.hideError(n)):n.classList.add("isError")}),v(p(e),"onSubmit",function(t){t.preventDefault(),e.checkDateOfBirthValid()&&e.checkGenderValid()&&(e.checkRecaptchaGuid()?(e.setRequest(),e.hideError(e.refs.button)):e.setError({customError:"Please complete Recaptcha."}))}),v(p(e),"checkDateOfBirthValid",function(){return""!==e.element.dateOfBirth.value?(e.element.dateOfBirth.classList.remove("isError"),!0):(e.element.dateOfBirth.classList.add("isError"),e.element.dateOfBirth.click(),!1)}),v(p(e),"checkGenderValid",function(){return""!==e.element.gender.value?(e.element.gender.classList.remove("isError"),!0):(e.element.gender.classList.add("isError"),e.element.gender.focus(),!1)}),v(p(e),"setError",function(t){o.a.emit(i.a,e.options.id),t?t.customError?e.showError(e.refs.button,t.customError):t.error?(!0===t.error.email&&e.showError(e.refs.email,null),!0===t.error.recaptcha&&e.showError(e.refs.recaptcha,null),!0===t.error.another&&e.showError(e.refs.button,t.errorMessage),"string"==typeof t.error&&e.showError(e.refs.button,t.error)):console.error("Error is empty"):console.error("Response is empty",t)}),v(p(e),"showError",function(t,n){for(var r=0;r<e.refs.errors.length;r++){var o=e.refs.errors[r];if(t.contains(o)){n&&(o.innerHTML=n),o.classList.remove("isDisabled");break}}}),v(p(e),"hideError",function(t){for(var n=0;n<e.refs.errors.length;n++){var r=e.refs.errors[n];if(t.contains(r)){r.classList.remove("isDisabled");break}}}),v(p(e),"setRequest",function(){var t;switch(e.options.mode){case"vote":t={firstName:e.element.clientName.value,lastName:e.element.clientLastname.value,email:e.element.clientEmail.value,gender:e.element.gender.value,country:e.element.country.value,postCode:e.element.postcode.value,dateOfBirth:e.element.dateOfBirth.value,consent:e.element.consent.checked,partnerOptIn:e.element.partnerOptIn.checked,recaptchaResponse:e.guid,token:e.token,provider:e.provider,momentId:e.element.chooseMoment?e.element.chooseMoment.value:e.options.momentId,campaignId:e.options.campaignId};break;case"enquiry":t={FirstName:e.element.clientName.value,LastName:e.element.clientLastname.value,Email:e.element.email.value,Gender:e.element.gender.value,Country:e.element.country.value,Enquiry:e.element.enquiry.value,NameOfOrganisation:e.element.nameOfOrganisation.value,TypeOfOrganisation:e.element.typeOfOrganisation.value,JobTitle:e.element.jobTitle.value,PhoneNumber:e.element.phoneNumber.value,PostCode:e.element.postcode.value,DateOfBirth:e.element.dateOfBirth.value,EmailConsent:e.element.consent.checked,PartnerOptIn:e.element.partnerOptIn.checked,recaptchaResponse:e.guid};break;case"signUp":t={FirstName:e.element.clientName.value,LastName:e.element.clientLastname.value,Email:e.element.email.value,Gender:e.element.gender.value,Country:e.element.country.value,PostCode:e.element.postcode.value,DateOfBirth:e.element.dateOfBirth.value,EmailConsent:e.element.consent.checked,PartnerOptIn:e.element.partnerOptIn.checked,recaptchaResponse:e.guid};break;case"voting":t={FirstName:e.element.clientName.value,LastName:e.element.clientLastname.value,Email:e.element.email.value,Gender:e.element.gender.value,Country:e.element.country.value,PostCode:e.element.postcode.value,DateOfBirth:e.element.dateOfBirth.value,EmailConsent:e.element.consent.checked,PartnerOptIn:e.element.partnerOptIn.checked,SelectedVotingOption:e.element.selectedVotingOption.value,VotingType:e.element.votingType.value,recaptchaResponse:e.guid}}null===t.provider?s.a.push(e.options.currentPage,"Social Vote Button Click","email"):s.a.push(e.options.currentPage,"Social Vote Button Click",t.provider),Object(a.a)({method:"post",url:e.options.url,data:t}).then(function(n){n.data.Success?(o.a.emit(l.b,e.options.id),null===t.provider?s.a.push(e.options.currentPage,"Vote Form Submission Completed","email"):s.a.push(e.options.currentPage,"Vote Form Submission Completed",t.provider),"signUp"===e.options.mode&&fbq("track","Subscribe",{value:"0.00",currency:"USD"})):e.setError(n.data)}).catch(function(t){console.error("something wrong \xaf\\_(\u30c4)_/\xaf : "+t),o.a.emit(i.a,e.options.id)})}),v(p(e),"checkValid",function(e){if("SELECT"==e.tagName)return""!=e.value;if(e.classList.contains("flatpickr-input"))return e.classList.contains("active")||""!=e.value;var t=e.classList[0];return e.matches("."+t+":valid")}),e.guid=null,e.token=null,e.provider=null,e.inputs=e.refs.inputs,e.dateField=e.refs.datapicker,e.addListeners(),e}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"checkRecaptchaGuid",value:function(){return null!==this.guid}}]),n}();n(1).a.getInstance().define("vote-email",h)}},[[555,0]]]);
//# sourceMappingURL=vote-email.1f08e89365902fdf619f.js.map